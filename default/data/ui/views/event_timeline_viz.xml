<dashboard theme="light">
  <label>Event Timeline Visualization</label>
  <row>
    <panel>
      <html>
      <h2>Event Timeline Visualization</h2>
      <h4>Version: 1.5.0</h4>
      <h4>Created by Daniel Spavin (<a href="mailto:daniel@spavin.org">daniel@spavin.org</a>)</h4>
	  <h4>Integrated to <b>Splunk_TA_common-viz</b> (<a href="mailto:yoyonet-info@gmx.ch">yoyonet-info@gmx.ch</a>)</h4>
        </html>
    </panel>
  </row>
  <row>
    <panel>
      <viz type="Splunk_TA_common-viz.event-timeline-viz">
        <title>Event Timeline Viz - v1.5.0</title>
        <search>
          <query>| inputlookup splunk-release-dates.csv 
| rename Category as group
| eval tooltip=group . ": " . label
| eval color=if(label="Splunk 8.0 Released", "#009933",nocolor)
| table group, color, label, start, data,tooltip</query>
          <earliest>-24h@h</earliest>
          <latest>now</latest>
          <sampleRatio>1</sampleRatio>
        </search>
        <option name="drilldown">none</option>
        <option name="height">250</option>
        <option name="refresh.display">progressbar</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
      </viz>
    </panel>
  </row>
  <row>
    <panel>
      <html>
    
    
<h1>Version Support</h1>
<p>8.0, 7.3, 7.2, 7.1, 7.0, 6.6, 6.5, 6.4</p>


<h1>Who is this app for?</h1>
<p>This app is for anyone who wants to visualise and correlate multiple separate events on a common timeline.</p>


<h1>How does the app work?</h1>
<p>This app provides a visualization that you can use in your own apps and dashboards.</p>
<p>To use it in your dashboards, simply install the app, and create a search that provides the values you want to display.</p>


<h1>Usecases for the Event Timeline Visualization:</h1>
<ol>
  <li>Displaying time-based events</li>
  <li>Comparing the duration and severity of incident tickets created over the past month</li>
  <li>Tracking production releases and version information over time</li>
  <li>Visualizing server metrics over hours or days</li>
  <li>Tracking Notable Events over time</li>
</ol>


<h1>The following fields can be used in the search:</h1>
<ul>
  <li>label (required): A title for the event being displayed.</li>
  <li>start (required): A date and time indicating the start of the event</li>
  <li>end (optional): A data and time indicating the end of the event</li>
  <li>group (optional): A group name to categorise the events and display them together</li>
  <li>tooltip (optional): The tooltip text to show on hover (excluding the start/end time)</li>
  <li>color (optional): This is usually generated by the <a href="https://docs.splunk.com/Documentation/Splunk/latest/SearchReference/Rangemap"/>rangemap<a/> command. It is used to set the color for the slide. Valid colors are: HTML color code (eg: #abcdef), red, amber, green. If using rangemap, use 'range' instead of 'color'. Valid values include: low, elevated, severe, ok, warning, etc</li>
  <li>data (optional): A value to use for drilldowns, which is not displayed to the user, e.g. ID numbers, references, sources. The <i>data</i> field will be used to populate the $$tok_et_data$$ token.</li>
  
</ul>


<h1>Example Search</h1>
<p>
  <code>| makeresults count=25 <br />
| eval start=_time-random()% 7*24*60*60 <br />
| streamstats count as id<br />
| eval label=case(id%3=0,"Event A", id%5=0,"Event B", id%7=0,"Event C", id%11=0,"Event D",1=1,"Event E")<br />
| eval range=if(random()%2=0,"low","severe")<br />
| table start, label, range</code>
</p>


<h1>Tokens</h1>
<p>This visualization generates the following tokens on click:</p>
<ul><li>Start field - defaults to: $$tok_et_start$$</li>
<li>End field - defaults to: $$tok_et_end$$</li>
<li>Data field - defaults to:  $$tok_et_data$$</li>
<li>Label field - defaults to: $$tok_et_label$$</li>
<li>All Visible Events' Data field - defaults to: $$tok_et_all_visible$$</li>
</ul>
<p>Note: all token names are customisable in the visualization settings menu.</p>


<h1>Drilldown</h1>
<p>You can use the tokens to create drilldowns / dynamic panels in your dashboards. You can also use the Splunk drilldown menu to link to another dashboard, a search, or a specific URL.</p>
<p>The tokens mentioned above will be evaluated first, then the drilldown will happen (if you configured a drilldown). This means you can link to a custom search using the label field, start/end times, or the data field of the event you clicked.</p> 

<h1>Limits</h1>
<p>The visualization is bound by the following limits:</p>
<ul>
  <li>Total results: 10,000</li>
</ul>

<h1># Release Notes #</h1>
<h2>v 1.5.0</h2>
<ul>
  <li>Colors can now be set with HTML color codes. This will allow you to highlight events from the search by setting the color field to a HTML color code, e.g "#009933" or "#093". Note that if you supply both <em>range</em> and <em>color</em> fields, range takes precedence.<br/>
  e.g:<br/>
  <code>...| eval color = case(status="critical","#ff0000", status="ok","#00FF00", status="unknown","#0000FF", 1=1,"#efefef") | table label, start, end, group, color, tooltip, data</code>
  </li>
</ul>

<h2>v 1.4.0</h2>
<ul>
  <li>Added option to mark current time on the timeline</li>
</ul>

<h2>v 1.3.0</h2>
<ul>
  <li>Added option to sort groups by time in addition to group name</li>
</ul>


<h2>v 1.2.0</h2>
<ul>
  <li>Added options to set the default event color, background color, and text color</li>
</ul>

<h2>v 1.1.0</h2>
<ul>
  <li>Added drilldown ability using the built-in Splunk drilldown UI</li>
</ul>

<h2>v 1.0.2</h2>
<ul>
  <li>Added 'tooltip' field to set the tooltip text</li>
  <li>Added 'blue' as a color option (eval range='blue' or 'default' or 'debug')</li>
  <li>Fixed bug where viz wouldn't display when using a base search</li>
</ul>

<h2>v 1.0.1</h2>
<ul>
  <li>Initial version</li>
</ul>


<h1>Issues and Limitations</h1>
<ul><li>No issues identified.</li></ul>
<p>If you have a bug report or feature request, please contact <a href="email:daniel@spavin.net" title="Email: daniel@spavin.net">daniel@spavin.net</a>       </p>


<h1>Privacy and Legal</h1>
<p>No  personally identifiable information is logged or obtained in any way through this visualizaton.</p>


<h1>For support </h1>
<p>Send email to <a href="email:daniel@spavin.net" title="Email: daniel@spavin.net">daniel@spavin.net</a>        </p>
<p>Support is not guaranteed and will be provided on a best effort basis.</p>
    
<h1>Credits</h1>    
<p>This visualization uses the <a href="http://visjs.org/index.html" target="_blank">vis.js</a> visualization library.</p>

    
  </html>
    </panel>
  </row>
</dashboard>